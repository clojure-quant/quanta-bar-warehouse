# Transform
## append-only

### init data 
```clojure
(m/? (import-bars
       bar-engine
       {:asset "BTCUSDT"
        :calendar [:crypto :d]
        :import :bybit-parallel
        :to :nippy
        :window {:start (t/instant "2024-08-01T23:59:59.999999999Z")
                 :end (t/instant "2024-09-08T23:59:59.999999999Z")}
        :label "import bybit :d"}))

(m/?
  (b/get-bars bar-engine
              {:asset "BTCUSDT"
               :calendar [:crypto :d]
               :bardb :nippy}
              {}))
```

```console
|                :date |    :open |    :high |     :low |   :close |      :volume |  :asset |
|----------------------|---------:|---------:|---------:|---------:|-------------:|---------|
| 2024-08-02T00:00:00Z | 64631.66 | 65664.17 | 62276.07 | 65359.52 | 26649.072201 | BTCUSDT |
| 2024-08-03T00:00:00Z | 65359.52 | 65604.69 | 61220.51 | 61492.70 | 30995.032601 | BTCUSDT |
| 2024-08-04T00:00:00Z | 61492.70 | 62195.44 | 59845.00 | 60706.71 | 24048.623913 | BTCUSDT |
| 2024-08-05T00:00:00Z | 60706.71 | 61117.99 | 57141.00 | 58165.87 | 22629.787445 | BTCUSDT |
| 2024-08-06T00:00:00Z | 58165.87 | 58308.01 | 48974.00 | 54024.47 | 83370.985286 | BTCUSDT |
| 2024-08-07T00:00:00Z | 54024.47 | 57078.28 | 53946.16 | 56019.93 | 29868.423264 | BTCUSDT |
| 2024-08-08T00:00:00Z | 56019.93 | 57753.00 | 54548.70 | 55143.12 | 24187.586582 | BTCUSDT |
| 2024-08-09T00:00:00Z | 55143.12 | 62745.45 | 54736.64 | 61686.97 | 26074.519089 | BTCUSDT |
| 2024-08-10T00:00:00Z | 61686.97 | 61757.07 | 59520.53 | 60845.02 | 22877.550585 | BTCUSDT |
| 2024-08-11T00:00:00Z | 60845.02 | 61484.99 | 60240.58 | 60923.71 | 22990.614685 | BTCUSDT |
|                  ... |      ... |      ... |      ... |      ... |          ... |     ... |
| 2024-08-30T00:00:00Z | 59044.69 | 61175.07 | 58703.08 | 59348.57 | 18827.563337 | BTCUSDT |
| 2024-08-31T00:00:00Z | 59348.57 | 59944.16 | 57700.00 | 59130.23 | 19456.016647 | BTCUSDT |
| 2024-09-01T00:00:00Z | 59130.23 | 59463.00 | 58736.42 | 58972.48 |  7176.997611 | BTCUSDT |
| 2024-09-02T00:00:00Z | 58972.48 | 59080.67 | 57162.76 | 57293.29 | 16960.761333 | BTCUSDT |
| 2024-09-03T00:00:00Z | 57293.29 | 59432.74 | 57124.21 | 59142.75 | 23098.259720 | BTCUSDT |
| 2024-09-04T00:00:00Z | 59142.75 | 59825.00 | 57401.01 | 57481.78 | 20902.434172 | BTCUSDT |
| 2024-09-05T00:00:00Z | 57481.78 | 58526.02 | 55566.05 | 57972.69 | 30443.293677 | BTCUSDT |
| 2024-09-06T00:00:00Z | 57972.69 | 58333.08 | 55632.01 | 56177.67 | 28363.931568 | BTCUSDT |
| 2024-09-07T00:00:00Z | 56177.67 | 57018.51 | 52535.50 | 53961.62 | 33299.004330 | BTCUSDT |
| 2024-09-08T00:00:00Z | 53961.62 | 54851.34 | 53750.02 | 54164.51 | 22779.134421 | BTCUSDT |
| 2024-09-09T00:00:00Z | 54164.51 | 55324.49 | 53628.06 | 54877.92 | 14830.880938 | BTCUSDT |
```

### append data (+ 6 days)
```clojure
(m/?
  (b/get-bars bar-engine
              {:asset "BTCUSDT"
               :calendar [:crypto :d]
               :bardb :nippy
               :to :nippy
               :import :bybit-parallel
               :transform :append-only}
              {:start (t/instant "2024-08-25T00:00:00Z")
               :end (t/instant "2024-09-15T00:00:00Z")}))
```

```console
|                :date |    :open |    :high |     :low |   :close |      :volume |  :asset |
|----------------------|---------:|---------:|---------:|---------:|-------------:|---------|
| 2024-08-25T00:00:00Z | 64046.30 | 64500.00 | 63543.28 | 64153.50 | 19546.945175 | BTCUSDT |
| 2024-08-26T00:00:00Z | 64153.50 | 65032.12 | 63780.00 | 64218.10 | 18111.952814 | BTCUSDT |
| 2024-08-27T00:00:00Z | 64218.10 | 64479.22 | 62796.41 | 62834.75 | 26594.582272 | BTCUSDT |
| 2024-08-28T00:00:00Z | 62834.75 | 63213.07 | 57955.58 | 59411.08 | 33807.337927 | BTCUSDT |
| 2024-08-29T00:00:00Z | 59411.08 | 60257.77 | 57801.54 | 59044.69 | 23996.944745 | BTCUSDT |
| 2024-08-30T00:00:00Z | 59044.69 | 61175.07 | 58703.08 | 59348.57 | 18827.563337 | BTCUSDT |
| 2024-08-31T00:00:00Z | 59348.57 | 59944.16 | 57700.00 | 59130.23 | 19456.016647 | BTCUSDT |
| 2024-09-01T00:00:00Z | 59130.23 | 59463.00 | 58736.42 | 58972.48 |  7176.997611 | BTCUSDT |
| 2024-09-02T00:00:00Z | 58972.48 | 59080.67 | 57162.76 | 57293.29 | 16960.761333 | BTCUSDT |
| 2024-09-03T00:00:00Z | 57293.29 | 59432.74 | 57124.21 | 59142.75 | 23098.259720 | BTCUSDT |
|                  ... |      ... |      ... |      ... |      ... |          ... |     ... |
| 2024-09-05T00:00:00Z | 57481.78 | 58526.02 | 55566.05 | 57972.69 | 30443.293677 | BTCUSDT |
| 2024-09-06T00:00:00Z | 57972.69 | 58333.08 | 55632.01 | 56177.67 | 28363.931568 | BTCUSDT |
| 2024-09-07T00:00:00Z | 56177.67 | 57018.51 | 52535.50 | 53961.62 | 33299.004330 | BTCUSDT |
| 2024-09-08T00:00:00Z | 53961.62 | 54851.34 | 53750.02 | 54164.51 | 22779.134421 | BTCUSDT |
| 2024-09-09T00:00:00Z | 54164.51 | 55324.49 | 53628.06 | 54877.92 | 14830.880938 | BTCUSDT |
| 2024-09-10T00:00:00Z | 54877.92 | 58130.24 | 54591.47 | 57039.58 | 21486.315072 | BTCUSDT |
| 2024-09-11T00:00:00Z | 57039.58 | 58052.21 | 56383.76 | 57643.48 | 25482.208587 | BTCUSDT |
| 2024-09-12T00:00:00Z | 57643.48 | 57991.00 | 55555.00 | 57334.15 | 26867.906044 | BTCUSDT |
| 2024-09-13T00:00:00Z | 57334.15 | 58582.80 | 57318.13 | 58134.02 | 24532.880423 | BTCUSDT |
| 2024-09-14T00:00:00Z | 58134.02 | 60628.71 | 57627.44 | 60486.46 | 27348.341105 | BTCUSDT |
| 2024-09-15T00:00:00Z | 60486.46 | 60605.59 | 59381.96 | 59993.99 | 10879.880909 | BTCUSDT |
```